% INTRO:
% \subsection{Auto Battler games}

% are auto battlers popular?
Auto battlers are a new and wildly popular genre of online game.
\textit{Auto Chess} released in January of 2019 \cite{autochess}, and
within that same month was regularly seeing 70,000 concurrent players
\cite{auto-chess-what-and-why}. By June, \textit{Dota Underlords} and
\textit{Teamfight Tactics} were among the most popular online games in
the world \cite{autobattler-popularity}. Since then, entries like
\textit{Hearthstone: Battlegrounds}, \textit{Fire Emblem Heroes: Pawns
  of Loki} \textit{Storybook Brawl} have further refined the genre
\cite{hearthstone-battlegrounds, feh-pawnsOfLoki-video,
  storybook-brawl}.

% what are auto battlers? how do they work?

In an auto battler, a number of players (typically eight) compete to
build the best deck through a number of rounds. Each round consists of
a deck-building phase and a battle. In the deck-building phase, each
player improves their deck by selecting cards from a shared pool. In
the battle phase, two players' decks compete automatically. Players
who loose too many of these battles are eliminated. Play proceeds in
rounds until all but one player are eliminated. The remaining player
wins.

Auto battlers are in many ways similar to deck-building collectible
card games like \textit{Magic: the Gathering} or \textit{Yu-Gi-Oh!}
\cite{magic-the-gathering, yugioh-tcg}. In collectible card games, a
battle between two decks is called a game. Because it encompasses and
affects multiple games, the deck-building process is called the
\newterm{metagame.}
% TODO: finish this thought. (you need it to justify the examples in
% the next section.)

% \subsection{Balance and Metagame Health}
% what does it mean for a metagame to be healthy?
Deck-building games and metagames are often described as being either
\newterm{healthy} or \newterm{unhealthy}. The health of a metagame
depends on a variety of factors, of which we highlight
\newterm{diversity}. Diverse metagames are those where many different
decks coexist with similar overall win rates.

% what's the state of the art on how to get there? why isn't it good
% enough?
Metagame balance in deck-building games poses a challenge for game
designers, since a relatively small number of cards can be combined
into a large number of possible decks, that in turn can be paired
into an even larger number of match-ups. \textit{Magic: the Gathering}
relies on human playtesting in advance of releasing a set
\cite{designing-hod-ffl}. Advance human playtesting has repeatedly
failed to identify card designs or sets that lead to unhealthy
metagames. Even when it does successfully identify and fix unhealthy
metagames, human playtesting requires significant labor and time from
a number of skilled players.

In addition, digital card games like \textit{Hearthstone} collect and
analyze data after release from consumer play
\cite{blizzard-gamebalancetalk-keg2019}. While inexpensive, this
approach is insufficient on its own because it requires a significant
number of consumers to play in unhealthy metagames in order to
identify problematic designs.

% what goes wrong when the current approaches fail? (you lose players,
% don't gain new players, so you lose money)

Healthy and diverse metagames are desirable because they lead to more
varied, and therefore more enjoyable, battles. In a homogenous
metagame, any two battles are relatively similar. This reduced novelty
bores players, who may then reduce their involvement with the game and
purchase fewer products. Also, unsatisfied players often share their
opinions on social media, discouraging new players from joining the
game.

% (case study: eldraine)

For example, \textit{Magic: the Gathering}'s set \textit{Throne of
  Eldraine} was criticised for containing a number of overpowered
cards. Decks which contained these powerful cards reliably beat decks
without them. High-level players quickly converged on a small number
of deck designs which could best utilize the powerful \textit{Throne
  of Eldraine} cards. On at least one occasion, a tournamnt was
canceled due to lack of interest \cite{oko-meta-drama}. Wizards of the
Coast, the company responsible for \textit{Magic: the Gathering},
banned a total of six cards from \textit{Throne of Eldraine} in
response \cite{mtg-banlist, mtg-bnr-nov-2019, mtg-bnr-jun-2020,
  mtg-bnr-aug-2020}. Even after the bans, high-profile professional
players have complained on social media about \textit{Throne of
  Eldraine}'s affect on the \textit{Magic: the Gathering} metagame
\cite{lsv-eldraine-complaints}.

% \subsection{Our work}

In this paper, we attempt to reduce the cost of playtesting without
exposing consumers to unhealthy metagames by automating the balancing
process. In sections \ref{sec:sim} through \ref{sec:game} develop an auto battler game designed to facilitate AI research. In
section \ref{sec:tourney}, we present an algorithm which efficiently
and accurately approximates the average win rates of all the decks in
a metagame. In section \ref{sec:metrics} define three metrics which
evaluate the diversity of a metagame. In section
\ref{sec:othermetrics} we theorize how game designers could define
more precise metrics for their own games. In section
\ref{sec:optimization}, we use a genetic optimization algorithm to
balance a metagame. In section \ref{sec:results}, we present
experimental results evaluating the approximation algorithm descibed
in \ref{sec:tourney} and the genetic optimization described in
\ref{sec:optimization}. In section \ref{sec:discussion}, we review the
implications of our experimental results. In section
\ref{sec:relatedworks}, we discuss other research related to auto
battlers and deck-building metagames. In section \ref{sec:futurework},
we consider possible extensions to our work.
% todo: change  "average win rates" to "expected payoffs" ?

% in this paper, we...

% introduce an auto battler game

% present an approximation algorithm to more efficiently compute
% decks' average payoffs within a large metagame

% consider some metrics for evaluating metagame health in that game

% use off-the-shelf optimization techniques to balance for those metrics

% show off some experiments we did to balance for said metrics
